import pytest

from vnqr.crc import crc_func


@pytest.mark.parametrize(
    "test_input,expected",
    [
        (
            "00020101021138570010A00000072701270006970403011200110123456780208QRIBFTTA53037045802VN6304",
            "F4E5",
        ),
        (
            b"00020101021138600010A00000072701300006970403011697040311012345670208QRIBFTTC53037045802VN6304",
            "4F52",
        ),
        (
            "00020101021238570010A00000072701270006970403011300110123456780208QRIBFTTA530370454061800005802VN62340107NPS68690819thanh toan don hang6304",
            "2E2E",
        ),
        (
            "00020101021238600010A00000072701300006970403011697040311012345670208QRIBFTTC530370454061800005802VN62340107NPS68690819thanh toan don hang6304",
            "A203",
        ),
        (
            "00020101021238530010A0000007270123000697042501091234567890208QRIBFTTA5303704540710000005802VN62150811V1TH13758426304",
            "3158",
        ),
        (
            "00020101021238590010A000000727012900069704230115IVVSA35556669990208QRIBFTTA5303704540415435802VN62300826.VISET.V1C1T240129U5PZ1SXA6304",
            "039F",
        ),
    ],
)
def test_crc16(test_input, expected):
    assert crc_func(test_input) == expected
